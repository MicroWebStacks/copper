services:
  fetcher:
    build:
      context: ./fetcher
      dockerfile: mqtt_client.Dockerfile
    volumes:
      - ../cache/fetch:/cache
    ports:
      - 8001:8001
    networks:
      - my-network
    depends_on:
      - mosquitto
  mosquitto:
    image: eclipse-mosquitto:latest
    container_name: mosquitto
    ports:
      - 1883:1883
    volumes:
      - ./mosquitto/config:/mosquitto/config
      - ./mosquitto/log:/mosquitto/log
    networks:
      - my-network

networks:
  my-network:
    external: true
